(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function s(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=s(a);fetch(a.href,u)}})();const Jr=!1;var br=Array.isArray,oo=Array.prototype.indexOf,yr=Array.from,io=Object.defineProperty,Nt=Object.getOwnPropertyDescriptor,lo=Object.getOwnPropertyDescriptors,uo=Object.prototype,ao=Array.prototype,dn=Object.getPrototypeOf,Zr=Object.isExtensible;function me(t){return typeof t=="function"}function fo(t){return t()}function dr(t){for(var n=0;n<t.length;n++)t[n]()}const Ct=2,hn=4,Qe=8,wr=16,Tt=32,te=64,$e=128,gt=256,Ge=512,pt=1024,Ot=2048,ee=4096,Pt=8192,tr=16384,co=32768,Ar=65536,vo=1<<17,ho=1<<19,_n=1<<20,hr=1<<21,Bt=Symbol("$state"),pn=Symbol("legacy props");function mn(t){return t===this.v}function _o(t,n){return t!=t?n==n:t!==n||t!==null&&typeof t=="object"||typeof t=="function"}function xr(t){return!_o(t,this.v)}function po(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function mo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function go(t){throw new Error("https://svelte.dev/e/effect_orphan")}function bo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function yo(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function wo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ao(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function xo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ae=!1,Co=!1;function Eo(){Ae=!0}const So=1,Po=2,ko=16,To=1,Oo=2,gn=4,Fo=8,Io=16,Do=1,Ro=2,vt=Symbol();let X=null;function Xr(t){X=t}function xe(t,n=!1,s){var i=X={p:X,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Ae&&!n&&(X.l={s:null,u:null,r1:[],r2:Jt(!1)}),Tn(()=>{i.d=!0})}function Ce(t){const n=X;if(n!==null){const m=n.e;if(m!==null){var s=H,i=V;n.e=null;try{for(var a=0;a<m.length;a++){var u=m[a];Lt(u.effect),Et(u.reaction),rr(u.fn)}}finally{Lt(s),Et(i)}}X=n.p,n.m=!0}return{}}function Ee(){return!Ae||X!==null&&X.l===null}function wt(t){if(typeof t!="object"||t===null||Bt in t)return t;const n=dn(t);if(n!==uo&&n!==ao)return t;var s=new Map,i=br(t),a=yt(0),u=V,m=w=>{var b=V;Et(u);var y=w();return Et(b),y};return i&&s.set("length",yt(t.length)),new Proxy(t,{defineProperty(w,b,y){(!("value"in y)||y.configurable===!1||y.enumerable===!1||y.writable===!1)&&wo();var C=s.get(b);return C===void 0?(C=m(()=>yt(y.value)),s.set(b,C)):Q(C,m(()=>wt(y.value))),!0},deleteProperty(w,b){var y=s.get(b);if(y===void 0)b in w&&s.set(b,m(()=>yt(vt)));else{if(i&&typeof b=="string"){var C=s.get("length"),S=Number(b);Number.isInteger(S)&&S<C.v&&Q(C,S)}Q(y,vt),Qr(a)}return!0},get(w,b,y){var k;if(b===Bt)return t;var C=s.get(b),S=b in w;if(C===void 0&&(!S||(k=Nt(w,b))!=null&&k.writable)&&(C=m(()=>yt(wt(S?w[b]:vt))),s.set(b,C)),C!==void 0){var g=U(C);return g===vt?void 0:g}return Reflect.get(w,b,y)},getOwnPropertyDescriptor(w,b){var y=Reflect.getOwnPropertyDescriptor(w,b);if(y&&"value"in y){var C=s.get(b);C&&(y.value=U(C))}else if(y===void 0){var S=s.get(b),g=S==null?void 0:S.v;if(S!==void 0&&g!==vt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return y},has(w,b){var g;if(b===Bt)return!0;var y=s.get(b),C=y!==void 0&&y.v!==vt||Reflect.has(w,b);if(y!==void 0||H!==null&&(!C||(g=Nt(w,b))!=null&&g.writable)){y===void 0&&(y=m(()=>yt(C?wt(w[b]):vt)),s.set(b,y));var S=U(y);if(S===vt)return!1}return C},set(w,b,y,C){var F;var S=s.get(b),g=b in w;if(i&&b==="length")for(var k=y;k<S.v;k+=1){var R=s.get(k+"");R!==void 0?Q(R,vt):k in w&&(R=m(()=>yt(vt)),s.set(k+"",R))}S===void 0?(!g||(F=Nt(w,b))!=null&&F.writable)&&(S=m(()=>yt(void 0)),Q(S,m(()=>wt(y))),s.set(b,S)):(g=S.v!==vt,Q(S,m(()=>wt(y))));var D=Reflect.getOwnPropertyDescriptor(w,b);if(D!=null&&D.set&&D.set.call(C,y),!g){if(i&&typeof b=="string"){var z=s.get("length"),l=Number(b);Number.isInteger(l)&&l>=z.v&&Q(z,l+1)}Qr(a)}return!0},ownKeys(w){U(a);var b=Reflect.ownKeys(w).filter(S=>{var g=s.get(S);return g===void 0||g.v!==vt});for(var[y,C]of s)C.v!==vt&&!(y in w)&&b.push(y);return b},setPrototypeOf(){Ao()}})}function Qr(t,n=1){Q(t,t.v+n)}const be=new Map;function Jt(t,n){var s={f:0,v:t,reactions:null,equals:mn,rv:0,wv:0};return s}function yt(t,n){const s=Jt(t);return Ln(s),s}function Cr(t,n=!1){var i;const s=Jt(t);return n||(s.equals=xr),Ae&&X!==null&&X.l!==null&&((i=X.l).s??(i.s=[])).push(s),s}function Q(t,n,s=!1){V!==null&&!xt&&Ee()&&(V.f&(Ct|wr))!==0&&!(ut!=null&&ut.includes(t))&&xo();let i=s?wt(n):n;return bn(t,i)}function bn(t,n){if(!t.equals(n)){var s=t.v;Se?be.set(t,n):be.set(t,s),t.v=n,t.wv=Mn(),yn(t,Ot),Ee()&&H!==null&&(H.f&pt)!==0&&(H.f&(Tt|te))===0&&(mt===null?Ho([t]):mt.push(t))}return n}function tn(t,n=1){var s=U(t),i=n===1?s++:s--;return Q(t,s),i}function yn(t,n){var s=t.reactions;if(s!==null)for(var i=Ee(),a=s.length,u=0;u<a;u++){var m=s[u],w=m.f;(w&Ot)===0&&(!i&&m===H||(St(m,n),(w&(pt|gt))!==0&&((w&Ct)!==0?yn(m,ee):or(m))))}}let No=!1;var en,wn,An,xn;function Lo(){if(en===void 0){en=window,wn=/Firefox/.test(navigator.userAgent);var t=Element.prototype,n=Node.prototype,s=Text.prototype;An=Nt(n,"firstChild").get,xn=Nt(n,"nextSibling").get,Zr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Zr(s)&&(s.__t=void 0)}}function Cn(t=""){return document.createTextNode(t)}function ye(t){return An.call(t)}function er(t){return xn.call(t)}function K(t,n){return ye(t)}function zo(t,n){{var s=ye(t);return s instanceof Comment&&s.data===""?er(s):s}}function J(t,n=1,s=!1){let i=t;for(;n--;)i=er(i);return i}function Mo(t){t.textContent=""}function Zt(t){var n=Ct|Ot,s=V!==null&&(V.f&Ct)!==0?V:null;return H===null||s!==null&&(s.f&gt)!==0?n|=gt:H.f|=_n,{ctx:X,deps:null,effects:null,equals:mn,f:n,fn:t,reactions:null,rv:0,v:null,wv:0,parent:s??H}}function En(t){const n=Zt(t);return Ln(n),n}function We(t){const n=Zt(t);return n.equals=xr,n}function Sn(t){var n=t.effects;if(n!==null){t.effects=null;for(var s=0;s<n.length;s+=1)kt(n[s])}}function jo(t){for(var n=t.parent;n!==null;){if((n.f&Ct)===0)return n;n=n.parent}return null}function qo(t){var n,s=H;Lt(jo(t));try{Sn(t),n=qn(t)}finally{Lt(s)}return n}function Pn(t){var n=qo(t),s=(Rt||(t.f&gt)!==0)&&t.deps!==null?ee:pt;St(t,s),t.equals(n)||(t.v=n,t.wv=Mn())}function kn(t){H===null&&V===null&&go(),V!==null&&(V.f&gt)!==0&&H===null&&mo(),Se&&po()}function Bo(t,n){var s=n.last;s===null?n.last=n.first=t:(s.next=t,t.prev=s,n.last=t)}function re(t,n,s,i=!0){var a=H,u={ctx:X,deps:null,nodes_start:null,nodes_end:null,f:t|Ot,first:null,fn:n,last:null,next:null,parent:a,prev:null,teardown:null,transitions:null,wv:0};if(s)try{Sr(u),u.f|=co}catch(b){throw kt(u),b}else n!==null&&or(u);var m=s&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(_n|$e))===0;if(!m&&i&&(a!==null&&Bo(u,a),V!==null&&(V.f&Ct)!==0)){var w=V;(w.effects??(w.effects=[])).push(u)}return u}function Tn(t){const n=re(Qe,null,!1);return St(n,pt),n.teardown=t,n}function _r(t){kn();var n=H!==null&&(H.f&Tt)!==0&&X!==null&&!X.m;if(n){var s=X;(s.e??(s.e=[])).push({fn:t,effect:H,reaction:V})}else{var i=rr(t);return i}}function Uo(t){return kn(),On(t)}function Vo(t){const n=re(te,t,!0);return(s={})=>new Promise(i=>{s.outro?Ye(n,()=>{kt(n),i(void 0)}):(kt(n),i(void 0))})}function rr(t){return re(hn,t,!1)}function On(t){return re(Qe,t,!0)}function Xt(t,n=[],s=Zt){const i=n.map(s);return nr(()=>t(...i.map(U)))}function nr(t,n=0){return re(Qe|wr|n,t,!0)}function Qt(t,n=!0){return re(Qe|Tt,t,!0,n)}function Fn(t){var n=t.teardown;if(n!==null){const s=Se,i=V;rn(!0),Et(null);try{n.call(null)}finally{rn(s),Et(i)}}}function In(t,n=!1){var s=t.first;for(t.first=t.last=null;s!==null;){var i=s.next;(s.f&te)!==0?s.parent=null:kt(s,n),s=i}}function $o(t){for(var n=t.first;n!==null;){var s=n.next;(n.f&Tt)===0&&kt(n),n=s}}function kt(t,n=!0){var s=!1;if((n||(t.f&ho)!==0)&&t.nodes_start!==null){for(var i=t.nodes_start,a=t.nodes_end;i!==null;){var u=i===a?null:er(i);i.remove(),i=u}s=!0}In(t,n&&!s),Xe(t,0),St(t,tr);var m=t.transitions;if(m!==null)for(const b of m)b.stop();Fn(t);var w=t.parent;w!==null&&w.first!==null&&Dn(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Dn(t){var n=t.parent,s=t.prev,i=t.next;s!==null&&(s.next=i),i!==null&&(i.prev=s),n!==null&&(n.first===t&&(n.first=i),n.last===t&&(n.last=s))}function Ye(t,n){var s=[];Er(t,s,!0),Rn(s,()=>{kt(t),n&&n()})}function Rn(t,n){var s=t.length;if(s>0){var i=()=>--s||n();for(var a of t)a.out(i)}else n()}function Er(t,n,s){if((t.f&Pt)===0){if(t.f^=Pt,t.transitions!==null)for(const m of t.transitions)(m.is_global||s)&&n.push(m);for(var i=t.first;i!==null;){var a=i.next,u=(i.f&Ar)!==0||(i.f&Tt)!==0;Er(i,n,u?s:!1),i=a}}}function He(t){Nn(t,!0)}function Nn(t,n){if((t.f&Pt)!==0){t.f^=Pt,(t.f&pt)===0&&(t.f^=pt),Pe(t)&&(St(t,Ot),or(t));for(var s=t.first;s!==null;){var i=s.next,a=(s.f&Ar)!==0||(s.f&Tt)!==0;Nn(s,a?n:!1),s=i}if(t.transitions!==null)for(const u of t.transitions)(u.is_global||n)&&u.in()}}let Ke=[];function Go(){var t=Ke;Ke=[],dr(t)}function Wo(t){Ke.length===0&&queueMicrotask(Go),Ke.push(t)}let Ue=!1,pr=!1,Je=null,Ut=!1,Se=!1;function rn(t){Se=t}let Ve=[];let V=null,xt=!1;function Et(t){V=t}let H=null;function Lt(t){H=t}let ut=null;function Yo(t){ut=t}function Ln(t){V!==null&&V.f&hr&&(ut===null?Yo([t]):ut.push(t))}let lt=null,_t=0,mt=null;function Ho(t){mt=t}let zn=1,Ze=0,Rt=!1;function Mn(){return++zn}function Pe(t){var S;var n=t.f;if((n&Ot)!==0)return!0;if((n&ee)!==0){var s=t.deps,i=(n&gt)!==0;if(s!==null){var a,u,m=(n&Ge)!==0,w=i&&H!==null&&!Rt,b=s.length;if(m||w){var y=t,C=y.parent;for(a=0;a<b;a++)u=s[a],(m||!((S=u==null?void 0:u.reactions)!=null&&S.includes(y)))&&(u.reactions??(u.reactions=[])).push(y);m&&(y.f^=Ge),w&&C!==null&&(C.f&gt)===0&&(y.f^=gt)}for(a=0;a<b;a++)if(u=s[a],Pe(u)&&Pn(u),u.wv>t.wv)return!0}(!i||H!==null&&!Rt)&&St(t,pt)}return!1}function Ko(t,n){for(var s=n;s!==null;){if((s.f&$e)!==0)try{s.fn(t);return}catch{s.f^=$e}s=s.parent}throw Ue=!1,t}function Jo(t){return(t.f&tr)===0&&(t.parent===null||(t.parent.f&$e)===0)}function sr(t,n,s,i){if(Ue){if(s===null&&(Ue=!1),Jo(n))throw t;return}s!==null&&(Ue=!0);{Ko(t,n);return}}function jn(t,n,s=!0){var i=t.reactions;if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];ut!=null&&ut.includes(t)||((u.f&Ct)!==0?jn(u,n,!1):n===u&&(s?St(u,Ot):(u.f&pt)!==0&&St(u,ee),or(u)))}}function qn(t){var k;var n=lt,s=_t,i=mt,a=V,u=Rt,m=ut,w=X,b=xt,y=t.f;lt=null,_t=0,mt=null,Rt=(y&gt)!==0&&(xt||!Ut||V===null),V=(y&(Tt|te))===0?t:null,ut=null,Xr(t.ctx),xt=!1,Ze++,t.f|=hr;try{var C=(0,t.fn)(),S=t.deps;if(lt!==null){var g;if(Xe(t,_t),S!==null&&_t>0)for(S.length=_t+lt.length,g=0;g<lt.length;g++)S[_t+g]=lt[g];else t.deps=S=lt;if(!Rt)for(g=_t;g<S.length;g++)((k=S[g]).reactions??(k.reactions=[])).push(t)}else S!==null&&_t<S.length&&(Xe(t,_t),S.length=_t);if(Ee()&&mt!==null&&!xt&&S!==null&&(t.f&(Ct|ee|Ot))===0)for(g=0;g<mt.length;g++)jn(mt[g],t);return a!==t&&(Ze++,mt!==null&&(i===null?i=mt:i.push(...mt))),C}finally{lt=n,_t=s,mt=i,V=a,Rt=u,ut=m,Xr(w),xt=b,t.f^=hr}}function Zo(t,n){let s=n.reactions;if(s!==null){var i=oo.call(s,t);if(i!==-1){var a=s.length-1;a===0?s=n.reactions=null:(s[i]=s[a],s.pop())}}s===null&&(n.f&Ct)!==0&&(lt===null||!lt.includes(n))&&(St(n,ee),(n.f&(gt|Ge))===0&&(n.f^=Ge),Sn(n),Xe(n,0))}function Xe(t,n){var s=t.deps;if(s!==null)for(var i=n;i<s.length;i++)Zo(t,s[i])}function Sr(t){var n=t.f;if((n&tr)===0){St(t,pt);var s=H,i=X,a=Ut;H=t,Ut=!0;try{(n&wr)!==0?$o(t):In(t),Fn(t);var u=qn(t);t.teardown=typeof u=="function"?u:null,t.wv=zn;var m=t.deps,w;Jr&&Co&&t.f&Ot}catch(b){sr(b,t,s,i||t.ctx)}finally{Ut=a,H=s}}}function Xo(){try{bo()}catch(t){if(Je!==null)sr(t,Je,null);else throw t}}function Qo(){var t=Ut;try{var n=0;for(Ut=!0;Ve.length>0;){n++>1e3&&Xo();var s=Ve,i=s.length;Ve=[];for(var a=0;a<i;a++){var u=ei(s[a]);ti(u)}be.clear()}}finally{pr=!1,Ut=t,Je=null}}function ti(t){var n=t.length;if(n!==0)for(var s=0;s<n;s++){var i=t[s];if((i.f&(tr|Pt))===0)try{Pe(i)&&(Sr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Dn(i):i.fn=null))}catch(a){sr(a,i,null,i.ctx)}}}function or(t){pr||(pr=!0,queueMicrotask(Qo));for(var n=Je=t;n.parent!==null;){n=n.parent;var s=n.f;if((s&(te|Tt))!==0){if((s&pt)===0)return;n.f^=pt}}Ve.push(n)}function ei(t){for(var n=[],s=t;s!==null;){var i=s.f,a=(i&(Tt|te))!==0,u=a&&(i&pt)!==0;if(!u&&(i&Pt)===0){if((i&hn)!==0)n.push(s);else if(a)s.f^=pt;else{var m=V;try{V=s,Pe(s)&&Sr(s)}catch(y){sr(y,s,null,s.ctx)}finally{V=m}}var w=s.first;if(w!==null){s=w;continue}}var b=s.parent;for(s=s.next;s===null&&b!==null;)s=b.next,b=b.parent}return n}function U(t){var n=t.f,s=(n&Ct)!==0;if(V!==null&&!xt){if(!(ut!=null&&ut.includes(t))){var i=V.deps;t.rv<Ze&&(t.rv=Ze,lt===null&&i!==null&&i[_t]===t?_t++:lt===null?lt=[t]:(!Rt||!lt.includes(t))&&lt.push(t))}}else if(s&&t.deps===null&&t.effects===null){var a=t,u=a.parent;u!==null&&(u.f&gt)===0&&(a.f^=gt)}return s&&(a=t,Pe(a)&&Pn(a)),Se&&be.has(t)?be.get(t):t.v}function we(t){var n=xt;try{return xt=!0,t()}finally{xt=n}}const ri=-7169;function St(t,n){t.f=t.f&ri|n}function ni(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Bt in t)mr(t);else if(!Array.isArray(t))for(let n in t){const s=t[n];typeof s=="object"&&s&&Bt in s&&mr(s)}}}function mr(t,n=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!n.has(t)){n.add(t),t instanceof Date&&t.getTime();for(let i in t)try{mr(t[i],n)}catch{}const s=dn(t);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const i=lo(s);for(let a in i){const u=i[a].get;if(u)try{u.call(t)}catch{}}}}}const si=["touchstart","touchmove"];function oi(t){return si.includes(t)}let nn=!1;function ii(){nn||(nn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var n;if(!t.defaultPrevented)for(const s of t.target.elements)(n=s.__on_r)==null||n.call(s)})},{capture:!0}))}function Bn(t){var n=V,s=H;Et(null),Lt(null);try{return t()}finally{Et(n),Lt(s)}}function li(t,n,s,i=s){t.addEventListener(n,()=>Bn(s));const a=t.__on_r;a?t.__on_r=()=>{a(),i(!0)}:t.__on_r=()=>i(!0),ii()}const ui=new Set,sn=new Set;function ai(t,n,s,i={}){function a(u){if(i.capture||ge.call(n,u),!u.cancelBubble)return Bn(()=>s==null?void 0:s.call(this,u))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Wo(()=>{n.addEventListener(t,a,i)}):n.addEventListener(t,a,i),a}function ct(t,n,s,i,a){var u={capture:i,passive:a},m=ai(t,n,s,u);(n===document.body||n===window||n===document)&&Tn(()=>{n.removeEventListener(t,m,u)})}function ge(t){var F;var n=this,s=n.ownerDocument,i=t.type,a=((F=t.composedPath)==null?void 0:F.call(t))||[],u=a[0]||t.target,m=0,w=t.__root;if(w){var b=a.indexOf(w);if(b!==-1&&(n===document||n===window)){t.__root=n;return}var y=a.indexOf(n);if(y===-1)return;b<=y&&(m=b)}if(u=a[m]||t.target,u!==n){io(t,"currentTarget",{configurable:!0,get(){return u||s}});var C=V,S=H;Et(null),Lt(null);try{for(var g,k=[];u!==null;){var R=u.assignedSlot||u.parentNode||u.host||null;try{var D=u["__"+i];if(D!=null&&(!u.disabled||t.target===u))if(br(D)){var[z,...l]=D;z.apply(u,[t,...l])}else D.call(u,t)}catch(N){g?k.push(N):g=N}if(t.cancelBubble||R===n||R===null)break;u=R}if(g){for(let N of k)queueMicrotask(()=>{throw N});throw g}}finally{t.__root=n,delete t.currentTarget,Et(C),Lt(S)}}}function Un(t){var n=document.createElement("template");return n.innerHTML=t,n.content}function gr(t,n){var s=H;s.nodes_start===null&&(s.nodes_start=t,s.nodes_end=n)}function Mt(t,n){var s=(n&Do)!==0,i=(n&Ro)!==0,a,u=!t.startsWith("<!>");return()=>{a===void 0&&(a=Un(u?t:"<!>"+t),s||(a=ye(a)));var m=i||wn?document.importNode(a,!0):a.cloneNode(!0);if(s){var w=ye(m),b=m.lastChild;gr(w,b)}else gr(m,m);return m}}function zt(t,n){t!==null&&t.before(n)}function Dt(t,n){var s=n==null?"":typeof n=="object"?n+"":n;s!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=s,t.nodeValue=s+"")}function fi(t,n){return ci(t,n)}const Ht=new Map;function ci(t,{target:n,anchor:s,props:i={},events:a,context:u,intro:m=!0}){Lo();var w=new Set,b=S=>{for(var g=0;g<S.length;g++){var k=S[g];if(!w.has(k)){w.add(k);var R=oi(k);n.addEventListener(k,ge,{passive:R});var D=Ht.get(k);D===void 0?(document.addEventListener(k,ge,{passive:R}),Ht.set(k,1)):Ht.set(k,D+1)}}};b(yr(ui)),sn.add(b);var y=void 0,C=Vo(()=>{var S=s??n.appendChild(Cn());return Qt(()=>{if(u){xe({});var g=X;g.c=u}a&&(i.$$events=a),y=t(S,i)||{},u&&Ce()}),()=>{var R;for(var g of w){n.removeEventListener(g,ge);var k=Ht.get(g);--k===0?(document.removeEventListener(g,ge),Ht.delete(g)):Ht.set(g,k)}sn.delete(b),S!==s&&((R=S.parentNode)==null||R.removeChild(S))}});return vi.set(y,C),y}let vi=new WeakMap;function Pr(t,n,[s,i]=[0,0]){var a=t,u=null,m=null,w=vt,b=s>0?Ar:0,y=!1;const C=(g,k=!0)=>{y=!0,S(k,g)},S=(g,k)=>{w!==(w=g)&&(w?(u?He(u):k&&(u=Qt(()=>k(a))),m&&Ye(m,()=>{m=null})):(m?He(m):k&&(m=Qt(()=>k(a,[s+1,i]))),u&&Ye(u,()=>{u=null})))};nr(()=>{y=!1,n(C),y||S(null,null)},b)}function di(t,n){return n}function hi(t,n,s,i){for(var a=[],u=n.length,m=0;m<u;m++)Er(n[m].e,a,!0);var w=u>0&&a.length===0&&s!==null;if(w){var b=s.parentNode;Mo(b),b.append(s),i.clear(),It(t,n[0].prev,n[u-1].next)}Rn(a,()=>{for(var y=0;y<u;y++){var C=n[y];w||(i.delete(C.k),It(t,C.prev,C.next)),kt(C.e,!w)}})}function _i(t,n,s,i,a,u=null){var m=t,w={flags:n,items:new Map,first:null};{var b=t;m=b.appendChild(Cn())}var y=null,C=!1,S=We(()=>{var g=s();return br(g)?g:g==null?[]:yr(g)});nr(()=>{var g=U(S),k=g.length;C&&k===0||(C=k===0,pi(g,w,m,a,n,i,s),u!==null&&(k===0?y?He(y):y=Qt(()=>u(m)):y!==null&&Ye(y,()=>{y=null})),U(S))})}function pi(t,n,s,i,a,u,m){var w=t.length,b=n.items,y=n.first,C=y,S,g=null,k=[],R=[],D,z,l,F;for(F=0;F<w;F+=1){if(D=t[F],z=u(D,F),l=b.get(z),l===void 0){var N=C?C.e.nodes_start:s;g=gi(N,n,g,g===null?n.first:g.next,D,z,F,i,a,m),b.set(z,g),k=[],R=[],C=g.next;continue}if(mi(l,D,F),(l.e.f&Pt)!==0&&He(l.e),l!==C){if(S!==void 0&&S.has(l)){if(k.length<R.length){var M=R[0],E;g=M.prev;var T=k[0],e=k[k.length-1];for(E=0;E<k.length;E+=1)on(k[E],M,s);for(E=0;E<R.length;E+=1)S.delete(R[E]);It(n,T.prev,e.next),It(n,g,T),It(n,e,M),C=M,g=e,F-=1,k=[],R=[]}else S.delete(l),on(l,C,s),It(n,l.prev,l.next),It(n,l,g===null?n.first:g.next),It(n,g,l),g=l;continue}for(k=[],R=[];C!==null&&C.k!==z;)(C.e.f&Pt)===0&&(S??(S=new Set)).add(C),R.push(C),C=C.next;if(C===null)continue;l=C}k.push(l),g=l,C=l.next}if(C!==null||S!==void 0){for(var P=S===void 0?[]:yr(S);C!==null;)(C.e.f&Pt)===0&&P.push(C),C=C.next;var I=P.length;if(I>0){var j=w===0?s:null;hi(n,P,j,b)}}H.first=n.first&&n.first.e,H.last=g&&g.e}function mi(t,n,s,i){bn(t.v,n),t.i=s}function gi(t,n,s,i,a,u,m,w,b,y){var C=(b&So)!==0,S=(b&ko)===0,g=C?S?Cr(a):Jt(a):a,k=(b&Po)===0?m:Jt(m),R={i:k,v:g,k:u,a:null,e:null,prev:s,next:i};try{return R.e=Qt(()=>w(t,g,k,y),No),R.e.prev=s&&s.e,R.e.next=i&&i.e,s===null?n.first=R:(s.next=R,s.e.next=R.e),i!==null&&(i.prev=R,i.e.prev=R.e),R}finally{}}function on(t,n,s){for(var i=t.next?t.next.e.nodes_start:s,a=n?n.e.nodes_start:s,u=t.e.nodes_start;u!==i;){var m=er(u);a.before(u),u=m}}function It(t,n,s){n===null?t.first=s:(n.next=s,n.e.next=s&&s.e),s!==null&&(s.prev=n,s.e.prev=n&&n.e)}function bi(t,n,s,i,a){var u=t,m="",w;nr(()=>{m!==(m=n()??"")&&(w!==void 0&&(kt(w),w=void 0),m!==""&&(w=Qt(()=>{var b=m+"",y=Un(b);gr(ye(y),y.lastChild),u.before(y)})))})}function yi(t,n,s){rr(()=>{var i=we(()=>n(t,s==null?void 0:s())||{});if(i!=null&&i.destroy)return()=>i.destroy()})}const ln=[...` 	
\r\f \v\uFEFF`];function wi(t,n,s){var i=t==null?"":""+t;if(n&&(i=i?i+" "+n:n),s){for(var a in s)if(s[a])i=i?i+" "+a:a;else if(i.length)for(var u=a.length,m=0;(m=i.indexOf(a,m))>=0;){var w=m+u;(m===0||ln.includes(i[m-1]))&&(w===i.length||ln.includes(i[w]))?i=(m===0?"":i.substring(0,m))+i.substring(w+1):m=w}}return i===""?null:i}function Kt(t,n,s,i,a,u){var m=t.__className;if(m!==s||m===void 0){var w=wi(s,i,u);w==null?t.removeAttribute("class"):t.className=w,t.__className=s}else if(u&&a!==u)for(var b in u){var y=!!u[b];(a==null||y!==!!a[b])&&t.classList.toggle(b,y)}return u}function Ai(t,n,s=n){var i=Ee();li(t,"input",a=>{var u=a?t.defaultValue:t.value;if(u=fr(t)?cr(u):u,s(u),i&&u!==(u=n())){var m=t.selectionStart,w=t.selectionEnd;t.value=u??"",w!==null&&(t.selectionStart=m,t.selectionEnd=Math.min(w,t.value.length))}}),we(n)==null&&t.value&&s(fr(t)?cr(t.value):t.value),On(()=>{var a=n();fr(t)&&a===cr(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function fr(t){var n=t.type;return n==="number"||n==="range"}function cr(t){return t===""?null:+t}function Vn(t=!1){const n=X,s=n.l.u;if(!s)return;let i=()=>ni(n.s);if(t){let a=0,u={};const m=Zt(()=>{let w=!1;const b=n.s;for(const y in b)b[y]!==u[y]&&(u[y]=b[y],w=!0);return w&&a++,a});i=()=>U(m)}s.b.length&&Uo(()=>{un(n,i),dr(s.b)}),_r(()=>{const a=we(()=>s.m.map(fo));return()=>{for(const u of a)typeof u=="function"&&u()}}),s.a.length&&_r(()=>{un(n,i),dr(s.a)})}function un(t,n){if(t.l.s)for(const s of t.l.s)U(s);n()}let qe=!1;function xi(t){var n=qe;try{return qe=!1,[t(),qe]}finally{qe=n}}const Ci={get(t,n){if(!t.exclude.includes(n))return U(t.version),n in t.special?t.special[n]():t.props[n]},set(t,n,s){return n in t.special||(t.special[n]=it({get[n](){return t.props[n]}},n,gn)),t.special[n](s),tn(t.version),!0},getOwnPropertyDescriptor(t,n){if(!t.exclude.includes(n)&&n in t.props)return{enumerable:!0,configurable:!0,value:t.props[n]}},deleteProperty(t,n){return t.exclude.includes(n)||(t.exclude.push(n),tn(t.version)),!0},has(t,n){return t.exclude.includes(n)?!1:n in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(n=>!t.exclude.includes(n))}};function Ei(t,n){return new Proxy({props:t,exclude:n,special:{},version:Jt(0)},Ci)}const Si={get(t,n){let s=t.props.length;for(;s--;){let i=t.props[s];if(me(i)&&(i=i()),typeof i=="object"&&i!==null&&n in i)return i[n]}},set(t,n,s){let i=t.props.length;for(;i--;){let a=t.props[i];me(a)&&(a=a());const u=Nt(a,n);if(u&&u.set)return u.set(s),!0}return!1},getOwnPropertyDescriptor(t,n){let s=t.props.length;for(;s--;){let i=t.props[s];if(me(i)&&(i=i()),typeof i=="object"&&i!==null&&n in i){const a=Nt(i,n);return a&&!a.configurable&&(a.configurable=!0),a}}},has(t,n){if(n===Bt||n===pn)return!1;for(let s of t.props)if(me(s)&&(s=s()),s!=null&&n in s)return!0;return!1},ownKeys(t){const n=[];for(let s of t.props){me(s)&&(s=s());for(const i in s)n.includes(i)||n.push(i)}return n}};function Pi(...t){return new Proxy({props:t},Si)}function an(t){var n;return((n=t.ctx)==null?void 0:n.d)??!1}function it(t,n,s,i){var T;var a=(s&To)!==0,u=!Ae||(s&Oo)!==0,m=(s&Fo)!==0,w=(s&Io)!==0,b=!1,y;m?[y,b]=xi(()=>t[n]):y=t[n];var C=Bt in t||pn in t,S=m&&(((T=Nt(t,n))==null?void 0:T.set)??(C&&n in t&&(e=>t[n]=e)))||void 0,g=i,k=!0,R=!1,D=()=>(R=!0,k&&(k=!1,w?g=we(i):g=i),g);y===void 0&&i!==void 0&&(S&&u&&yo(),y=D(),S&&S(y));var z;if(u)z=()=>{var e=t[n];return e===void 0?D():(k=!0,R=!1,e)};else{var l=(a?Zt:We)(()=>t[n]);l.f|=vo,z=()=>{var e=U(l);return e!==void 0&&(g=void 0),e===void 0?g:e}}if((s&gn)===0)return z;if(S){var F=t.$$legacy;return function(e,P){return arguments.length>0?((!u||!P||F||b)&&S(P?z():e),e):z()}}var N=!1,M=Cr(y),E=Zt(()=>{var e=z(),P=U(M);return N?(N=!1,P):M.v=e});return m&&U(E),a||(E.equals=xr),function(e,P){if(arguments.length>0){const I=P?U(E):u&&m?wt(e):e;if(!E.equals(I)){if(N=!0,Q(M,I),R&&g!==void 0&&(g=I),an(E))return e;we(()=>U(E))}return e}return an(E)?E.v:U(E)}}const ki="5";var vn;typeof window<"u"&&((vn=window.__svelte??(window.__svelte={})).v??(vn.v=new Set)).add(ki);Eo();var Ti=Mt('<button class="svelte-1go90zh"> </button>'),Oi=Mt('<nav class="menu svelte-1go90zh"><div class="menu-container svelte-1go90zh"><div class="dropdown svelte-1go90zh"><button class="menu-top svelte-1go90zh">File</button> <div><button class="svelte-1go90zh">New</button> <button class="svelte-1go90zh">Open..</button> <button class="svelte-1go90zh">Save</button> <button class="svelte-1go90zh">Save as..</button></div></div> <div class="dropdown svelte-1go90zh"><button class="menu-top svelte-1go90zh"> </button> <div></div></div> <div class="dropdown svelte-1go90zh"><button class="menu-top svelte-1go90zh">Format</button> <div><button class="svelte-1go90zh"> </button> <button class="svelte-1go90zh"> </button></div></div> <div class="dropdown svelte-1go90zh"><button class="menu-top svelte-1go90zh">View</button> <div><button class="svelte-1go90zh"> </button></div></div> <div class="dropdown svelte-1go90zh"><button class="menu-top svelte-1go90zh">Help</button> <div><a href="https://www.chordpro.org/chordpro/" class="svelte-1go90zh">ChordPro Format</a> <a href="https://github.com/mnezerka/svelte-chordpro-editor" class="svelte-1go90zh">Github Repository</a></div></div></div></nav>');function Fi(t,n){xe(n,!1);let s=it(n,"transpose_steps",8,0),i=it(n,"format",24,()=>({})),a=it(n,"view",24,()=>({})),u=it(n,"on_new",8,()=>{}),m=it(n,"on_open",8,()=>{}),w=it(n,"on_save",8,()=>{}),b=it(n,"on_save_as",8,()=>{}),y=it(n,"on_transpose",8,()=>{}),C=it(n,"on_format_toggle",8,()=>{}),S=it(n,"on_view_toggle",8,()=>{}),g=Cr(null);const k=[-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6];function R(G){U(g)===G?Q(g,null):Q(g,G)}function D(G,Z){Q(g,null),G(Z)}function z(G){const Z=dt=>{G.contains(dt.target)||G.dispatchEvent(new CustomEvent("outclick"))};return document.addEventListener("click",Z,!0),{destroy(){document.removeEventListener("click",Z,!0)}}}const l=()=>{Q(g,null)};function F(G,Z){return G<0?"-"+G:G>0?"+"+G:Z!==void 0?Z:"no transposition"}function N(G){return E(F(G),G==s())}function M(){let G="Transpose",Z=F(s(),"");return Z&&(G+=" ("+Z+")"),G}function E(G,Z){let dt=G;return Z&&(dt+=" ✓"),dt}Vn();var T=Oi(),e=K(T),P=K(e),I=K(P),j=J(I,2);let O;var $=K(j),jt=J($,2),qt=J(jt,2),q=J(qt,2),tt=J(P,2),Ft=K(tt),ke=K(Ft),ne=J(Ft,2);let se;_i(ne,5,()=>k,di,(G,Z)=>{var dt=Ti(),$t=K(dt);Xt(Gt=>Dt($t,Gt),[()=>N(U(Z))],We),ct("click",dt,()=>{D(y(),U(Z))}),zt(G,dt)});var oe=J(tt,2),ie=K(oe),le=J(ie,2);let ue;var Vt=K(le),Te=K(Vt),ae=J(Vt,2),Oe=K(ae),fe=J(oe,2),ce=K(fe),ve=J(ce,2);let de;var he=K(ve),Fe=K(he),Ie=J(fe,2),_e=K(Ie),De=J(_e,2);let pe;yi(T,G=>z==null?void 0:z(G)),rr(()=>ct("outclick",T,()=>l())),Xt((G,Z,dt,$t,Gt,Re,Ne,Le,ir)=>{O=Kt(j,1,"menu-item-container svelte-1go90zh",null,O,G),Dt(ke,Z),se=Kt(ne,1,"menu-item-container svelte-1go90zh",null,se,dt),ue=Kt(le,1,"menu-item-container svelte-1go90zh",null,ue,$t),Dt(Te,Gt),Dt(Oe,Re),de=Kt(ve,1,"menu-item-container svelte-1go90zh",null,de,Ne),Dt(Fe,Le),pe=Kt(De,1,"menu-item-container svelte-1go90zh",null,pe,ir)},[()=>({hidden:U(g)!=="file"}),M,()=>({hidden:U(g)!=="transpose"}),()=>({hidden:U(g)!=="format"}),()=>E("Title Right",i().title_right==!0),()=>E("Use Colors",i().use_colors),()=>({hidden:U(g)!=="view"}),()=>E("ChordPro Cheat Sheet",a().cheatsheet),()=>({hidden:U(g)!=="help"})],We),ct("click",I,()=>{R("file")}),ct("click",$,()=>{D(u())}),ct("click",jt,()=>{D(m())}),ct("click",qt,()=>{D(w())}),ct("click",q,()=>{D(b())}),ct("click",Ft,()=>{R("transpose")}),ct("click",ie,()=>{R("format")}),ct("click",Vt,()=>{D(C(),"title_right")}),ct("click",ae,()=>{D(C(),"use_colors")}),ct("click",ce,()=>{R("view")}),ct("click",he,()=>{D(S(),"cheatsheet")}),ct("click",_e,()=>{R("help")}),zt(t,T),Ce()}var Ii=Mt('<span class="sub"> </span>'),Di=Mt('<nav class="no-print svelte-dzut9y"><div class="title svelte-dzut9y"><span class="main svelte-dzut9y">ChordPro Editor</span> <!></div> <!></nav>');function Ri(t,n){const s=Ei(n,["children","$$slots","$$events","$$legacy"]);xe(n,!1);let i=it(n,"subtitle",8,"");Vn();var a=Di(),u=K(a),m=J(K(u),2);{var w=y=>{var C=Ii(),S=K(C);Xt(()=>Dt(S,`- ${i()??""}`)),zt(y,C)};Pr(m,y=>{i().length>0&&y(w)})}var b=J(u,2);Fi(b,Pi(()=>s)),zt(t,a),Ce()}function Ni(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Be={},fn;function Li(){if(fn)return Be;fn=1;function t(D){return D&&D.__esModule&&Object.prototype.hasOwnProperty.call(D,"default")?D.default:D}Object.defineProperty(Be,"__esModule",{value:!0});var n,s,i,a,u,m,w,b,y,C={};function S(){if(s)return n;function D(l,F,N,M){var E=Error.call(this,l);return Object.setPrototypeOf&&Object.setPrototypeOf(E,D.prototype),E.expected=F,E.found=N,E.location=M,E.name="SyntaxError",E}function z(l,F,N){return N=N||" ",l.length>F?l:(F-=l.length,l+(N+=N.repeat(F)).slice(0,F))}return s=1,function(l,F){function N(){this.constructor=l}N.prototype=F.prototype,l.prototype=new N}(D,Error),D.prototype.format=function(l){var F="Error: "+this.message;if(this.location){var N,M=null;for(N=0;N<l.length;N++)if(l[N].source===this.location.source){M=l[N].text.split(/\r\n|\n|\r/g);break}var E=this.location.start,T=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(E):E,e=this.location.source+":"+T.line+":"+T.column;if(M){var P=this.location.end,I=z("",T.line.toString().length," "),j=M[E.line-1],O=(E.line===P.line?P.column:j.length+1)-E.column||1;F+=`
 --> `+e+`
`+I+` |
`+T.line+" | "+j+`
`+I+" | "+z("",E.column-1," ")+z("",O,"^")}else F+=`
 at `+e}return F},D.buildMessage=function(l,F){var N={literal:function(P){return'"'+E(P.text)+'"'},class:function(P){var I=P.parts.map(function(j){return Array.isArray(j)?T(j[0])+"-"+T(j[1]):T(j)});return"["+(P.inverted?"^":"")+I.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(P){return P.description}};function M(P){return P.charCodeAt(0).toString(16).toUpperCase()}function E(P){return P.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(I){return"\\x0"+M(I)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(I){return"\\x"+M(I)})}function T(P){return P.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(I){return"\\x0"+M(I)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(I){return"\\x"+M(I)})}function e(P){return N[P.type](P)}return"Expected "+function(P){var I,j,O=P.map(e);if(O.sort(),O.length>0){for(I=1,j=1;I<O.length;I++)O[I-1]!==O[I]&&(O[j]=O[I],j++);O.length=j}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}(l)+" but "+function(P){return P?'"'+E(P)+'"':"end of input"}(F)+" found."},n={StartRules:["All"],SyntaxError:D,parse:function(l,F){var N,M,E,T,e={},P=(F=F!==void 0?F:{}).grammarSource,I={All:Gr},j=Gr,O="{",$="}",jt="title:",qt="t:",q="meta: title",tt="subtitle:",Ft="st:",ke="meta: subtitle",ne="artist:",se="meta: artist",oe="composer:",ie="meta: composer",le="lyricist:",ue="meta: lyricist",Vt="copyright:",Te="meta: copyright",ae="album:",Oe="meta: album",fe="year:",ce="meta: year",ve="key:",de="meta: key",he="capo:",Fe="meta: capo",Ie="time:",_e="meta: time",De="tempo:",pe="meta: tempo",G="duration:",Z="meta: duration",dt="{c:",$t="{comment:",Gt="soc",Re="start_of_chorus",Ne="eoc",Le="end_of_chorus",ir="[",$n="]",kr="sot",Tr="start_of_tab",Or="eot",Fr="end_of_tab",Gn=/^[\n\r]/,W=/^[^}]/,Ir=/^[^{[\n\r]/,Dr=/^[A-Z]/,Rr=/^[^\]]/,Nr=/^[^{\n\r]/,ze={type:"any"},Wn=Yt([`
`,"\r"],!1,!1),st=L("{",!1),at=L(" ",!1),Y=Yt(["}"],!0,!1),et=L("}",!1),Yn=L("title:",!1),Hn=L("t:",!1),Kn=L("meta: title",!1),Jn=L("subtitle:",!1),Zn=L("st:",!1),Xn=L("meta: subtitle",!1),Qn=L("artist:",!1),ts=L("meta: artist",!1),es=L("composer:",!1),rs=L("meta: composer",!1),ns=L("lyricist:",!1),ss=L("meta: lyricist",!1),os=L("copyright:",!1),is=L("meta: copyright",!1),ls=L("album:",!1),us=L("meta: album",!1),as=L("year:",!1),fs=L("meta: year",!1),cs=L("key:",!1),vs=L("meta: key",!1),ds=L("capo:",!1),hs=L("meta: capo",!1),_s=L("time:",!1),ps=L("meta: time",!1),ms=L("tempo:",!1),gs=L("meta: tempo",!1),bs=L("duration:",!1),ys=L("meta: duration",!1),ws=L("{c:",!1),As=L("{comment:",!1),xs=L("soc",!1),Cs=L("start_of_chorus",!1),Es=L("eoc",!1),Ss=L("end_of_chorus",!1),Lr=Yt(["{","[",`
`,"\r"],!0,!1),Ps=L("[",!1),zr=Yt([["A","Z"]],!1,!1),Mr=Yt(["]"],!0,!1),ks=L("]",!1),Ts=L("sot",!1),Os=L("start_of_tab",!1),Fs=L("eot",!1),Is=L("end_of_tab",!1),jr=Yt(["{",`
`,"\r"],!0,!1),Ds=function(v){return""},Rs=function(v,o){return{header:v,content:o}},Ns=function(v){return v},Ls=function(v){return{type:"title",value:v}},zs=function(v){return{type:"subtitle",value:v}},Ms=function(v){return{type:"artist",value:v}},js=function(v){return{type:"composer",value:v}},qs=function(v){return{type:"lyricist",value:v}},Bs=function(v){return{type:"copyright",value:v}},Us=function(v){return{type:"album",value:v}},Vs=function(v){return{type:"year",value:v}},$s=function(v){return{type:"key",value:v}},Gs=function(v){return{type:"capo",value:v}},Ws=function(v){return{type:"time",value:v}},Ys=function(v){return{type:"tempo",value:v}},Hs=function(v){return{type:"duration",value:v}},Ks=function(v){return{type:"comment",value:v}},qr=function(v,o){return o},Js=function(v,o,_){return[v].concat(o)},Zs=function(v){return{type:"verse",items:v}},Xs=function(v){return{type:"chorus",items:v}},Br=function(v,o){return o},Qs=function(v,o){return[v].concat(o)},to=function(v){return{type:"line",items:v}},eo=function(v){return{type:"text",value:v}},ro=function(v){return{type:"chord",value:v}},no=function(v){return{type:"tab",items:v}},Ur=function(v,o){return o},so=function(v,o){return[v].concat(o)},r=0|F.peg$currPos,Wt=[{line:1,column:1}],bt=r,Me=F.peg$maxFailExpected||[],d=0|F.peg$silentFails;if(F.startRule){if(!(F.startRule in I))throw new Error(`Can't start parsing from rule "`+F.startRule+'".');j=I[F.startRule]}function L(v,o){return{type:"literal",text:v,ignoreCase:o}}function Yt(v,o,_){return{type:"class",parts:v,inverted:o,ignoreCase:_}}function Vr(v){var o,_=Wt[v];if(_)return _;if(v>=Wt.length)o=Wt.length-1;else for(o=v;!Wt[--o];);for(_={line:(_=Wt[o]).line,column:_.column};o<v;)l.charCodeAt(o)===10?(_.line++,_.column=1):_.column++,o++;return Wt[v]=_,_}function $r(v,o,_){var x=Vr(v),A=Vr(o);return{source:P,start:{offset:v,line:x.line,column:x.column},end:{offset:o,line:A.line,column:A.column}}}function h(v){r<bt||(r>bt&&(bt=r,Me=[]),Me.push(v))}function Gr(){var v,o,_,x,A;return v=r,o=function(){var c,f,p;if(c=r,f=[],p=Wr(),p!==e)for(;p!==e;)f.push(p),p=Wr();else f=e;return f!==e&&(f=Ns(f)),c=f,c}(),o===e&&(o=null),_=function(){var c,f,p,B,nt,ft,ot;if(c=r,f=lr(),f!==e){if(p=[],B=r,(nt=rt())!==e){if(ft=[],(ot=rt())!==e)for(;ot!==e;)ft.push(ot),ot=rt();else ft=e;ft!==e&&(ot=lr())!==e?B=qr(f,ot):(r=B,B=e)}else r=B,B=e;for(;B!==e;)if(p.push(B),B=r,(nt=rt())!==e){if(ft=[],(ot=rt())!==e)for(;ot!==e;)ft.push(ot),ot=rt();else ft=e;ft!==e&&(ot=lr())!==e?B=qr(f,ot):(r=B,B=e)}else r=B,B=e;if(B=r,d++,l.length>r?(nt=l.charAt(r),r++):(nt=e,d===0&&h(ze)),d--,nt===e?B=void 0:(r=B,B=e),B===e){if(B=[],(nt=rt())!==e)for(;nt!==e;)B.push(nt),nt=rt();else B=e;B===e&&(B=r,d++,l.length>r?(nt=l.charAt(r),r++):(nt=e,d===0&&h(ze)),d--,nt===e?B=void 0:(r=B,B=e))}B!==e?c=Js(f,p):(r=c,c=e)}else r=c,c=e;return c}(),_===e&&(_=r,x=r,d++,l.length>r?(A=l.charAt(r),r++):(A=e,d===0&&h(ze)),d--,A===e?x=void 0:(r=x,x=e),x!==e&&(x=Ds()),_=x),_!==e?v=Rs(o,_):(r=v,v=e),v}function Wr(){var v;return(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,6)===jt?(p=jt,r+=6):(p=e,d===0&&h(Yn)),p===e&&(l.substr(r,2)===qt?(p=qt,r+=2):(p=e,d===0&&h(Hn)),p===e&&(l.substr(r,11)===q?(p=q,r+=11):(p=e,d===0&&h(Kn)))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Ls(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,9)===tt?(p=tt,r+=9):(p=e,d===0&&h(Jn)),p===e&&(l.substr(r,3)===Ft?(p=Ft,r+=3):(p=e,d===0&&h(Zn)),p===e&&(l.substr(r,14)===ke?(p=ke,r+=14):(p=e,d===0&&h(Xn)))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=zs(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,7)===ne?(p=ne,r+=7):(p=e,d===0&&h(Qn)),p===e&&(l.substr(r,12)===se?(p=se,r+=12):(p=e,d===0&&h(ts))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Ms(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,9)===oe?(p=oe,r+=9):(p=e,d===0&&h(es)),p===e&&(l.substr(r,14)===ie?(p=ie,r+=14):(p=e,d===0&&h(rs))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=js(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,9)===le?(p=le,r+=9):(p=e,d===0&&h(ns)),p===e&&(l.substr(r,14)===ue?(p=ue,r+=14):(p=e,d===0&&h(ss))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=qs(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,10)===Vt?(p=Vt,r+=10):(p=e,d===0&&h(os)),p===e&&(l.substr(r,15)===Te?(p=Te,r+=15):(p=e,d===0&&h(is))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Bs(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,6)===ae?(p=ae,r+=6):(p=e,d===0&&h(ls)),p===e&&(l.substr(r,11)===Oe?(p=Oe,r+=11):(p=e,d===0&&h(us))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Us(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,5)===fe?(p=fe,r+=5):(p=e,d===0&&h(as)),p===e&&(l.substr(r,10)===ce?(p=ce,r+=10):(p=e,d===0&&h(fs))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Vs(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,4)===ve?(p=ve,r+=4):(p=e,d===0&&h(cs)),p===e&&(l.substr(r,9)===de?(p=de,r+=9):(p=e,d===0&&h(vs))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=$s(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,5)===he?(p=he,r+=5):(p=e,d===0&&h(ds)),p===e&&(l.substr(r,10)===Fe?(p=Fe,r+=10):(p=e,d===0&&h(hs))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Gs(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,5)===Ie?(p=Ie,r+=5):(p=e,d===0&&h(_s)),p===e&&(l.substr(r,10)===_e?(p=_e,r+=10):(p=e,d===0&&h(ps))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Ws(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,6)===De?(p=De,r+=6):(p=e,d===0&&h(ms)),p===e&&(l.substr(r,11)===pe?(p=pe,r+=11):(p=e,d===0&&h(gs))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Ys(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f;if(o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e)if(x=function(){var p;return l.substr(r,9)===G?(p=G,r+=9):(p=e,d===0&&h(bs)),p===e&&(l.substr(r,14)===Z?(p=Z,r+=14):(p=e,d===0&&h(ys))),p}(),x!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),A=r,c=[],f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y)),f!==e)for(;f!==e;)c.push(f),f=l.charAt(r),W.test(f)?r++:(f=e,d===0&&h(Y));else c=e;(A=c!==e?l.substring(A,r):c)!==e?(l.charCodeAt(r)===125?(c=$,r++):(c=e,d===0&&h(et)),c!==e&&(f=ht())!==e?o=Hs(A):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return o}()),v}function rt(){var v;return v=l.charAt(r),Gn.test(v)?r++:(v=e,d===0&&h(Wn)),v}function ht(){var v,o;if(v=[],(o=rt())!==e)for(;o!==e;)v.push(o),o=rt();else v=e;return v===e&&(v=r,d++,l.length>r?(o=l.charAt(r),r++):(o=e,d===0&&h(ze)),d--,o===e?v=void 0:(r=v,v=e)),v}function lr(){var v;return(v=function(){var o,_;return o=r,(_=Yr())!==e&&(_=Zs(_)),o=_,o}())===e&&(v=function(){var o,_,x,A,c,f,p,B;return o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e?(l.substr(r,3)===Gt?(x=Gt,r+=3):(x=e,d===0&&h(xs)),x===e&&(l.substr(r,15)===Re?(x=Re,r+=15):(x=e,d===0&&h(Cs))),x!==e?(l.charCodeAt(r)===125?(A=$,r++):(A=e,d===0&&h(et)),A!==e&&rt()!==e&&(c=Yr())!==e&&rt()!==e?(l.charCodeAt(r)===123?(f=O,r++):(f=e,d===0&&h(st)),f!==e?(l.substr(r,3)===Ne?(p=Ne,r+=3):(p=e,d===0&&h(Es)),p===e&&(l.substr(r,13)===Le?(p=Le,r+=13):(p=e,d===0&&h(Ss))),p!==e?(l.charCodeAt(r)===125?(B=$,r++):(B=e,d===0&&h(et)),B!==e?o=Xs(c):(r=o,o=e)):(r=o,o=e)):(r=o,o=e)):(r=o,o=e)):(r=o,o=e)):(r=o,o=e),o}())===e&&(v=function(){var o,_,x,A,c;if(o=r,l.substr(r,3)===dt?(_=dt,r+=3):(_=e,d===0&&h(ws)),_===e&&(l.substr(r,9)===$t?(_=$t,r+=9):(_=e,d===0&&h(As))),_!==e){if(l.charCodeAt(r)===32?r++:d===0&&h(at),x=r,A=[],c=l.charAt(r),W.test(c)?r++:(c=e,d===0&&h(Y)),c!==e)for(;c!==e;)A.push(c),c=l.charAt(r),W.test(c)?r++:(c=e,d===0&&h(Y));else A=e;(x=A!==e?l.substring(x,r):A)!==e?(l.charCodeAt(r)===125?(A=$,r++):(A=e,d===0&&h(et)),A!==e?o=Ks(x):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;return o}())===e&&(v=function(){var o,_,x,A,c,f,p,B;return o=r,l.charCodeAt(r)===123?(_=O,r++):(_=e,d===0&&h(st)),_!==e?(l.substr(r,3)===kr?(x=kr,r+=3):(x=e,d===0&&h(Ts)),x===e&&(l.substr(r,12)===Tr?(x=Tr,r+=12):(x=e,d===0&&h(Os))),x!==e?(l.charCodeAt(r)===125?(A=$,r++):(A=e,d===0&&h(et)),A!==e&&rt()!==e?(c=function(){var nt,ft,ot,At,je;if(nt=r,ft=ar(),ft!==e){for(ot=[],At=r,rt()!==e&&(je=ar())!==e?At=Ur(ft,je):(r=At,At=e);At!==e;)ot.push(At),At=r,rt()!==e&&(je=ar())!==e?At=Ur(ft,je):(r=At,At=e);nt=so(ft,ot)}else r=nt,nt=e;return nt}(),c!==e&&rt()!==e?(l.charCodeAt(r)===123?(f=O,r++):(f=e,d===0&&h(st)),f!==e?(l.substr(r,3)===Or?(p=Or,r+=3):(p=e,d===0&&h(Fs)),p===e&&(l.substr(r,10)===Fr?(p=Fr,r+=10):(p=e,d===0&&h(Is))),p!==e?(l.charCodeAt(r)===125?(B=$,r++):(B=e,d===0&&h(et)),B!==e?o=no(c):(r=o,o=e)):(r=o,o=e)):(r=o,o=e)):(r=o,o=e)):(r=o,o=e)):(r=o,o=e)):(r=o,o=e),o}()),v}function Yr(){var v,o,_,x,A;if(v=r,(o=ur())!==e){for(_=[],x=r,rt()!==e&&(A=ur())!==e?x=Br(o,A):(r=x,x=e);x!==e;)_.push(x),x=r,rt()!==e&&(A=ur())!==e?x=Br(o,A):(r=x,x=e);v=Qs(o,_)}else r=v,v=e;return v}function ur(){var v,o;if(v=[],(o=Kr())===e&&(o=Hr()),o!==e)for(;o!==e;)v.push(o),(o=Kr())===e&&(o=Hr());else v=e;return v!==e&&(v=to(v)),v}function Hr(){var v,o,_;if(v=r,o=[],_=l.charAt(r),Ir.test(_)?r++:(_=e,d===0&&h(Lr)),_!==e)for(;_!==e;)o.push(_),_=l.charAt(r),Ir.test(_)?r++:(_=e,d===0&&h(Lr));else o=e;return(v=o!==e?l.substring(v,r):o)!==e&&(v=eo(v)),v}function Kr(){var v,o,_,x,A,c,f;if(v=r,l.charCodeAt(r)===91?(o=ir,r++):(o=e,d===0&&h(Ps)),o!==e){if(_=r,x=r,A=[],c=l.charAt(r),Dr.test(c)?r++:(c=e,d===0&&h(zr)),c!==e)for(;c!==e;)A.push(c),c=l.charAt(r),Dr.test(c)?r++:(c=e,d===0&&h(zr));else A=e;if(A!==e){for(c=[],f=l.charAt(r),Rr.test(f)?r++:(f=e,d===0&&h(Mr));f!==e;)c.push(f),f=l.charAt(r),Rr.test(f)?r++:(f=e,d===0&&h(Mr));x=A=[A,c]}else r=x,x=e;(_=x!==e?l.substring(_,r):x)!==e?(l.charCodeAt(r)===93?(x=$n,r++):(x=e,d===0&&h(ks)),x!==e?v=ro(_):(r=v,v=e)):(r=v,v=e)}else r=v,v=e;return v}function ar(){var v,o,_;if(v=r,o=[],_=l.charAt(r),Nr.test(_)?r++:(_=e,d===0&&h(jr)),_!==e)for(;_!==e;)o.push(_),_=l.charAt(r),Nr.test(_)?r++:(_=e,d===0&&h(jr));else o=e;return v=o!==e?l.substring(v,r):o}if(N=j(),F.peg$library)return{peg$result:N,peg$currPos:r,peg$FAILED:e,peg$maxFailExpected:Me,peg$maxFailPos:bt};if(N!==e&&r===l.length)return N;throw N!==e&&r<l.length&&h({type:"end"}),M=Me,E=bt<l.length?l.charAt(bt):null,T=bt<l.length?$r(bt,bt+1):$r(bt,bt),new D(D.buildMessage(M,E),M,E,T)}}}function g(){if(b)return w;function D(z,l){const F=["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"],N=["C","Db","D","D#","E","F","Gb","G","G#","A","A#","B"];if(z.length<1)return;let M="",E=0;for(;E<z.length;){if("CDEFGAB".indexOf(z[E])===-1){M+=z[E],E++;continue}let T=z[E];E++,E<z.length&&(z[E]!=="#"&&z[E]!=="b"||(T+=z[E],E++));let e=F.indexOf(T);e===-1&&(e=N.indexOf(T),e===-1&&console.error("Unknown chord root",T)),e+=l,e%=12,e<0&&(e=12+e),M+=F[e]}return M}return b=1,w={transpose:function(z,l){for(let F of z.content)if(["verse","chorus"].includes(F.type)){for(let N of F.items)if(N.type=="line")for(let M of N.items)M.type=="chord"&&(M.value=D(M.value,l))}return z},transposeChord:D}}var k=function(){if(y)return C;y=1;const D=S(),z=function(){if(a)return i;function N(E){let T="",e="";for(let I=0;I<E.items.length;I++){const j=E.items[I];let O;switch(j.value.length,j.type){case"chord":O=e.length-T.length,O>0&&(T+=" ".repeat(O)),T+=j.value+" ";break;case"text":e+=j.value,O=T.length-e.length,O>0&&(e+=" ".repeat(O))}}let P="";return T.length>0&&(P+=T+`
`),P+e}function M(E){var T="";for(let e=0;e<E.items.length;e++){const P=E.items[e];P.type=="line"&&(T+=N(P)+`
`)}return T}return a=1,i={processSong:function(E){var T="";if(E.header)for(let e=0;e<E.header.length;e++){let P=E.header[e];switch(P.type){case"title":T+=`Title: ${P.value}
`;break;case"subtitle":T+=`Subtitle: ${P.value}
`;break;case"artist":T+=`Artist: ${P.value}
`}}T+=`
`;for(let e=0;e<E.content.length;e++){let P=E.content[e];e>0&&(T+=`

`),P.type!="verse"&&P.type!="chorus"||(T+=M(P))}return T},processVerse:M,processRow:N}}(),l=function(){if(m)return u;function N(E,T){let e=[],P=[],I=null;for(let O=0;O<E.items.length;O++){let $=E.items[O];$.type==="chord"?(e.push($.value),I=$.value):$.type==="text"&&(I===null&&e.push(""),P.push($.value),I=null)}let j='<table class="line">';return T&&(j+='<tr class="line-chords">',j+=e.map(O=>`<td class="chord">${O}</td>`).join(`
`),j+="</tr>"),j+='<tr class="line-lyrics">',j+=P.map(O=>`<td class="lyrics">${O.replaceAll(" ","&nbsp;")}</td>`).join(`
`),j+="</tr>",j+="</table>",j}function M(E){let T=function(P){for(let I=0;I<P.items.length;I++){let j=P.items[I];for(let O=0;O<j.items.length;O++)if(j.items[O].type==="chord")return!0}return!1}(E),e=`<div class="${E.type}">
`;for(let P=0;P<E.items.length;P++)e+=N(E.items[P],T);return e+="</div>",e}return m=1,u={processSong:function(E){var T=`<div class="jschordpro-song">

`;let e="";if(E.header)for(let P=0;P<E.header.length;P++){let I=E.header[P];switch(I.type){case"title":e+=`<h1 class="${I.type}">${I.value}</h1>
`;break;case"subtitle":case"artist":case"composer":case"lyricist":case"copyright":case"album":case"year":case"key":case"capo":case"time":case"tempo":case"duration":e+=`<h2 class="${I.type}">${I.value}</h2>
`;break;default:console.warn(`no formatting defined for header item of type "${I.type}".`)}}e&&(T+=`<div class="header">
`,T+=e,T+=`</div>

`),T+=`<div class="content">
`;for(let P=0;P<E.content.length;P++)T+=M(E.content[P]);return(T+=`</div>
`)+`</div>
`}}}(),F=g();return C.parse=D.parse,C.to_ascii=z.processSong,C.to_html=l.processSong,C.transpose=F.transpose,C}(),R=t(k);return Be.default=R,Be}var zi=Li();const vr=Ni(zi);var Mi=Mt('<div class="error svelte-1umnwwe"> </div>'),ji=Mt('<div class="preview svelte-1umnwwe"><!> <div><!></div></div>');function qi(t,n){xe(n,!0);let s=it(n,"source",3,""),i=it(n,"transpose_steps",3,0),a=it(n,"format",19,()=>({})),u=En(()=>{let g={html:"",err:null};try{let k=vr.parse(s());i()!=0&&vr.transpose(k,i()),g.html=vr.to_html(k)}catch(k){g.err=k.toString()}return g});function m(){let g="";return a().title_right===!0?g+="meta-right ":g+="meta-left ",a().use_colors===!0&&(g+="use-colors "),g}var w=ji(),b=K(w);{var y=g=>{var k=Mi(),R=K(k);Xt(()=>Dt(R,U(u).err)),zt(g,k)};Pr(b,g=>{U(u).err!==null&&g(y)})}var C=J(b,2),S=K(C);bi(S,()=>U(u).html),Xt(g=>Kt(C,1,g,"svelte-1umnwwe"),[m]),zt(t,w),Ce()}var Bi=Mt(`<div class="cheatsheet svelte-lvi09b"><h1 class="svelte-lvi09b">ChordPro Cheat Sheet</h1> <p class="svelte-lvi09b"><b>Title</b> of the song:</p> <pre class="svelte-lvi09b"></pre> <p class="svelte-lvi09b"><b>Sub Title</b> - additional (less important) title of the song:</p> <pre class="svelte-lvi09b"></pre> <p class="svelte-lvi09b"><b>Author</b> of the song:</p> <pre class="svelte-lvi09b"></pre> <p class="svelte-lvi09b"><b>Chorus</b> is text between <i>start</i> and <i>end</i> identifiers (no empty lines allowed).</p> <pre class="svelte-lvi09b"></pre> or <pre class="svelte-lvi09b"></pre> <p class="svelte-lvi09b"><b>Chords</b> are inserted into the text between brackets <i>[</i> and <i>]</i> It is important to start each chord with capital letter to keep your text
machine readable and benefit from additional functionality (e.g.
transpositions). See example of verse with major and minor chords:</p> <pre class="svelte-lvi09b"></pre></div>`);function Ui(t){var n=Bi(),s=J(K(n),4);s.textContent=`{title: Song title}
`;var i=J(s,4);i.textContent=`{subtitle: Song subtitle}
`;var a=J(i,4);a.textContent=`{author: Bob Dylan}
`;var u=J(a,4);u.textContent=`{start_of_chorus}
First line of chorus
Second line of chorus
{end_of_chorus}
`;var m=J(u,2);m.textContent=`{soc}
First line of chorus
Second line of chorus
{eoc}
`;var w=J(m,4);w.textContent=`[Am]In my time of dying
[Am]I don't want nobody to mourn
[Am]All I want for you to do
Is [D]take my body [Am]home

`,zt(t,n)}function Vi(){if("showSaveFilePicker"in window){const n={types:[{description:"Chordpro text file",accept:{"text/plain":[".txt"]}}]};return window.showSaveFilePicker(n)}const t={type:"save-file",accepts:[{description:"Text file",extensions:["txt"],mimeTypes:["text/plain"]}]};return window.chooseFileSystemEntries(t)}function $i(){if("showOpenFilePicker"in window){const n={types:[{description:"Chordpro",accept:{"text/plain":[".txt"]}}],excludeAcceptAllOption:!1,multiple:!1};return window.showOpenFilePicker(n).then(s=>s[0])}const t={type:"open-file",accepts:[{description:"Chordpro text file",extensions:["txt"],mimeTypes:["text/plain"]}]};return window.chooseFileSystemEntries(t)}function Gi(t){return t.text?t.text():new Promise(s=>{const i=new FileReader;i.addEventListener("loadend",function(){s(i.result)}),i.readAsText(t)})}function cn(t,n){t.createWriter?t.createWriter().then(function(s){s.write(0,n).then(function(){return s.close()})}):t.createWritable().then(function(s){s.write(n).then(function(){return s.close()})})}function Wi(t){return t.replace(/\r\n|\r/g,`
`)}const Yi=`{title: In My Time of Dyin'}
{artist: Bob Dylan}

[Am]In my time of dying
[Am]I don't want nobody to mourn
[Am]All I want for you to do
Is [D]take my body [Am]home

{start_of_chorus}
[Am]Well, well, well, so I can die easy
Well, well, [D]well, so I can die [Am]easy
[Am]Well, well, well, so I can die easy
[D]Jesus gonna make up my [G]dy[G#]ing [Am]bed
{end_of_chorus}

Well, meet me Jesus, meet me
Meet me in the middle of the air
If these wings should fail to me
Lord, won't you meet me with another pair

Lord, in my time of dying
I don't want nobody to cry
All I want you to do
Is take me when I die
`,Hi=`{title: Song Title}
{artist: Song Artist}

Verse [C]with [G]chods...

{start_of_chorus}
Chorus [C]with [G]chords ...
{end_of_chorus}

Verse...
`;var Ki=Mt(`<!> <main class="svelte-1f1vxka"><div class="editor no-print svelte-1f1vxka"><textarea class="no-print svelte-1f1vxka">
        ></textarea> <!></div> <div class="preview svelte-1f1vxka"><!></div></main> <footer class="no-print svelte-1f1vxka"> </footer>`,1);function Ji(t,n){xe(n,!0);let s=it(n,"song",3,"");const i="chooseFileSystemEntries"in window||"showOpenFilePicker"in window;let a,u=yt(wt(s())),m=yt(wt(s())),w=yt(0),b=wt({title_right:!1,use_colors:!1}),y=wt({cheatsheet:!1});function C(){Q(u,Hi,!0)}async function S(){a=await $i();try{let q=await a.getFile(),tt=await Gi(q);Q(u,Wi(tt),!0)}catch(q){console.error("read failed: ",q)}}async function g(){if(a)try{await cn(a,U(u))}catch(q){const tt="Unable to save file";console.error(tt,q),alert(tt)}}async function k(){if(!i){console.error("this browser does not support access to file system");return}try{a=await Vi()}catch(q){if(q.name==="AbortError")return;const tt="An error occured trying to open the file.";console.error(tt,q),alert(tt);return}try{await cn(a,U(u))}catch(q){const tt="Unable to save file.";console.error(tt,q),alert(tt);return}}function R(q){Q(w,q,!0)}function D(q){q in b&&(b[q]=!b[q])}function z(q){q in y&&(y[q]=!y[q])}var l;function F(q,tt,Ft){l&&clearTimeout(l),l=setTimeout(()=>{Ft(tt)},q)}_r(()=>{F(1e3,U(u),q=>{Q(m,q,!0)})});var N=Ki(),M=zo(N);const E=En(()=>a&&a.name);Ri(M,{get subtitle(){return U(E)},get format(){return b},get view(){return y},get transpose_steps(){return U(w)},on_open:S,on_new:C,on_save:g,on_save_as:k,on_transpose:R,on_format_toggle:D,on_view_toggle:z});var T=J(M,2),e=K(T),P=K(e),I=J(P,2);{var j=q=>{Ui(q)};Pr(I,q=>{y.cheatsheet&&q(j)})}var O=J(e,2),$=K(O);qi($,{get source(){return U(m)},get transpose_steps(){return U(w)},get format(){return b}});var jt=J(T,2),qt=K(jt);Xt(q=>Dt(qt,`BlueSoft © ${q??""}`),[()=>new Date().getFullYear()]),Ai(P,()=>U(u),q=>Q(u,q)),zt(t,N),Ce()}fi(Ji,{target:document.body,props:{song:Yi}});
